# プルリクエスト(PR)をレビューするタスク

## 手順
1. PRのURLが提供されていなければユーザーに質問して提供してもらう
2. PRをmcp-githubのget_pull_requestツールで読み取る
3. 関連するプロジェクトのコードを読み取る
4. 以下の「レビュー観点」に従ってレビューを実施し、結果をユーザーに共有する

## レビュー観点

### 変更の意図と実装の整合性（最優先）
- **PRの説明と実装の一致**: タイトル・説明文で述べられている変更意図と実際の実装が一致しているか
- **変更範囲の妥当性**: 変更の目的に対して、修正範囲が適切か（不要な変更が含まれていないか）
- **削除コードの正当性**: 削除されたコード・関数・ファイルがある場合、その削除理由が明確で妥当か
  - 削除されたロジックに重要なバグ修正や例外処理が含まれていないか
  - 削除されたコードが他の箇所で使用されていないか（未使用コード削除の場合）

### デグレ・既存機能の後退検知（重点チェック）
- **既存動作への影響分析**: 変更が既存の画面挙動・データフロー・ビジネスロジックに影響を与えないか
- **削除された条件分岐の確認**: if文、when、try-catchなどの削除が既存の例外処理やエッジケース対応を壊していないか
- **API・ライブラリ変更の影響**: 依存バージョンの変更や古いAPIへの変更がないか
- **特殊条件下での動作**: 低メモリ、画面回転、アプリ再起動、バックグラウンド復帰時などで既存機能が壊れないか
- **データ互換性**: データベーススキーマ変更、SharedPreferencesのキー変更などが既存データと互換性を保っているか

### 仕様誤解・思い込みの検出
- **仕様の根拠確認**: 実装がPR説明、Issue、コメント、既存コードの意図に照らして正しいか
- **推測実装の検出**: 仕様が不明確なまま「おそらくこうだろう」で実装している可能性がある箇所を指摘
- **ビジネスロジックの整合性**: 登録→更新→削除などのデータライフサイクルに矛盾がないか
- **UIフローの一貫性**: ユーザー操作の流れ（画面遷移、戻る動作、状態遷移）に意図しない分岐や矛盾がないか
- **エッジケース・境界値の考慮**: 空リスト、null、0件、最大値、最小値などの境界条件が適切に処理されているか

### Android特有の観点
- **スレッド安全性**: UIスレッド／バックグラウンド処理の切り替えが正しいか（Dispatcher.Main、Dispatcher.IOの使い分け）
- **Jetpackベストプラクティス**: Compose、Navigation、Hilt、Room、ViewModelなどの使い方が推奨パターンに沿っているか
- **リソース管理**: Context、Drawable、Stringリソースの取得・解放が安全か（メモリリークのリスクがないか）
- **ライフサイクル管理**: Activity、Fragment、ViewModel、Coroutineのライフサイクルが適切に扱われているか
- **画面状態の保持**: 画面回転、バックスタック、プロセス終了からの復帰時に状態が正しく保持されるか

### 一般的な品質・保守性
- **可読性と一貫性**: コード構造、命名規則、フォーマットが既存コードと一貫しているか
- **ロジックの簡潔性**: 重複コードがなく、シンプルで理解しやすいロジックになっているか
- **エラーハンドリング**: 例外処理、null安全性、エラーメッセージが適切か
- **テストカバレッジ**: テストコードが存在し、重要な分岐・エッジケースがカバーされているか

### 改善提案
- **設計の改善**: より安全・シンプル・拡張しやすい実装の代替案があれば提案
- **パフォーマンス最適化**: 不要な再計算、再描画、重いDB操作、ネットワークアクセスを指摘
- **テスト強化**: ユニットテスト・UIテストで追加すべきケースを提案
- **保守性向上**: 将来の変更・拡張に備えたリファクタリング提案  